name: Test Release Locally

on:
  workflow_dispatch:
  push:
    branches:
      - test-release-*

jobs:
  release:
    uses: artkrsk/wordpress-plugin-release-action/.github/workflows/release.yml@main
    with:
      # Build configuration
      node_version: '23'
      build_command: 'npm run build'

      # Validation
      validate_zip_script: '__tests__/validate-zip.sh'

      # Paths
      assets_directory: '__assets__'

      # Version validation
      version_files: '["plugin_header", "readme.txt", "package.json"]'

      # DISABLE WordPress.org deployment for testing
      deploy_to_wordpress: false

    secrets:
      # Use dummy values for testing
      SVN_USERNAME: 'test_user'
      SVN_PASSWORD: 'test_pass'